######
trigger backend health --> green/red light; hover gives all status info which is now in the github
Hot 5 --> Last update received time/second display

######

Summary of what I recommend you implement next (aligned with your bullets)
	1.	Define trading day as PM+RTH using 04:00 ET boundary
	2.	Store bars under day-scoped Redis keys scanner:bars:{day}:{symbol}
	3.	HOD computed over all bars since day start (not sliding)
	4.	rVol baselines:
	•	rvol_1m baseline: 30–60 mins
	•	rvol_5m baseline: 60–120 mins
	5.	Reset: new day means new Redis keyspace; DB retains triggers (with retention cleanup)

#####

C) Your HOT5 can surface junk (illiquid spikes) even if triggers won’t

HOT5 is computed from all_metrics for all symbols, regardless of whether minimum volume / liquidity filters are met.

So a thin name with a weird print can bubble into HOT5 and distract you.

Recommendation: apply at least:
	•	min vol_1m filter (or min dollar volume)
	•	optional min price / spread sanity gate (even a cheap heuristic)

⸻

D) No retention policy for ScannerTriggerEvent

DB table will grow forever. This becomes performance pain and makes cooldown queries heavier.

Recommendation: add cleanup:
	•	Keep last N days (e.g. 7–30), or
	•	Partition by day/week, or
	•	Periodic delete job via Celery beat.

⸻

Trading-quality improvements (high impact, not hard)

If you want this to feel like a “real trader scanner”, these are the next features that matter:
	1.	Dollar volume filters (vol * price) > threshold
	2.	Relative volume vs same time-of-day (stronger than simple rolling avg)
	3.	Levels that matter: PMH, PDH, VWAP reclaim, ORB (opening range break)
	4.	Halt detection (or at least: gap in bars / zero prints / abnormal bar patterns)
	5.	Cooldown smarter than time-only: re-alert on new level break (you started this with new HOD, extend it)

⸻

Dev/ops troubleshooting checklist (scanner)

If scanner “doesn’t work”, here’s the real failure chain to verify:
	1.	IBKR ingestor running?
	•	scanner:ingestor:heartbeat updating
	•	Redis lists scanner:bars:SYMBOL receiving new bars
	2.	Celery beat firing scanner_tick every minute?
	•	Confirm periodic task exists and enabled
	•	Confirm worker logs show scanner_tick: created=...
	3.	Engine enabled + universe populated?
	•	ScannerConfig.enabled=True
	•	Universe tickers enabled + uppercase clean symbols
	4.	Channels working?
	•	WS connects, joins user_{id} group, receives hello
	•	Test with emit_test_event and emit_test_hot5
	5.	Pushover only after the task bug is fixed
	•	Then verify per-user gating: follow_alerts, pushover_enabled, cleared_until, thresholds.

⸻

Priority fix list (my recommended order)
	1.	Fix Pushover getattr bug ('ev typo)
	2.	Fix provider Bar1m imports (future-proofing)
	3.	Make session-aware calculations (HOD, rVol baseline, %change windows)
	4.	Add DB retention for trigger events
	5.	Apply basic liquidity gates to HOT5 (and optionally triggers)
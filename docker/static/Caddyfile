:80 {
    root * /srv/static
    encode zstd gzip
    file_server

    # Long cache for hashed filenames Django emits (e.g., app.8f3c2a1a.css)
    @hashed path_regexp hashed ^/static/.+\.[0-9a-f]{8,}\.
    header @hashed Cache-Control "public, max-age=31536000, immutable"

    # Default cache for other static
    header /static/* Cache-Control "public, max-age=3600"
}
